services:
  gio:
    image: ghcr.io/kr0nicas/picobot:latest
    container_name: gio_agente
    restart: unless-stopped
    # CentOS/Linux permission fix
    user: "${UID}:${GID}"
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.5'
    volumes:
      - ./data:/home/picobot/.picobot
    environment:
      # LLM Config (Google Gemini via OpenAI-compatible endpoint)
      - PICOBOT_LLM_API_KEY=${PICOBOT_LLM_API_KEY}
      - PICOBOT_LLM_MODEL=${PICOBOT_LLM_MODEL:-gemini-1.5-flash}
      - PICOBOT_LLM_API_BASE=https://generativelanguage.googleapis.com/v1beta/openai

      # Telegram Config
      - PICOBOT_TELEGRAM_TOKEN=${TELEGRAM_TOKEN}
      - PICOBOT_TELEGRAM_ALLOWED_USERS=${MY_TELEGRAM_ID}

      # Persistence & Home
      - PICOBOT_HOME=/home/picobot/.picobot
